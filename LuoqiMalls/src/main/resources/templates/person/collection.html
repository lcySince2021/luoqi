<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=0">

		<title>我的收藏</title>

		<link th:href="@{/css/admin.css}" rel="stylesheet" type="text/css">
		<link th:href="@{/css/amazeui.css}" rel="stylesheet" type="text/css">

		<link th:href="@{/css/personal.css}" rel="stylesheet" type="text/css">
		<link th:href="@{/css/colstyle.css}" rel="stylesheet" type="text/css">
		<script src="http://libs.baidu.com/jquery/2.1.1/jquery.min.js"></script>
		<script type="text/javascript" th:src="@{/js/jquery-1.7.min.js}"></script>
		<script type="text/javascript" th:src="@{/js/script.js}"></script>
	</head>

	<body>
	<iframe th:src="@{/goods/heart}" width="1920px" height="45px"  style="border: none"></iframe>
	<!--悬浮搜索框-->
	<br/>
	<div class="hmtop">
		<iframe th:src="@{/goods/heart1}" width="1960px" height="120px"  style="border: none"></iframe><!--->


		<div class="clear"></div>
	</div>
	<header>
		<article>
			<div class="mt-logo">
				<!--顶部导航条 -->


				<div class="clear"></div>
			</div>
			</div>
		</article>
	</header>

	<div style=" margin-left: 100px;width: 1800px; height: 30px; border: none;background-color:silver">  </div>

	<b class="line"></b>
		<div class="center">
			<div class="col-main">
				<div class="main-wrap">

					<div class="user-collection">
						<!--标题 -->
						<div class="am-cf am-padding">
							<div class="am-fl am-cf"><strong class="am-text-danger am-text-lg">我的收藏</strong> / <small>My&nbsp;Collection</small></div>
						</div>
						<hr/>

						<div class="you-like">
							<div class="s-bar">
								我的收藏
								<!--<a class="am-badge am-badge-danger am-round">降价</a>-->
								<!--<a class="am-badge am-badge-danger am-round">下架</a>-->
							</div><table>

							<ul class="s-content">
<li th:each="collect:${collectlist.list}">
								<div class="s-item-wrap">


									<div class="s-item ">
										<div class="s-pic">
											<input  type="hidden" class="collectfootgoodsId" name="collectfootgoodsId" th:value="${collect.goods.goodsId}"/>

											<div   class="s-pic-link collectgoodsfoot" >
												<img th:src="${collect.goods.image.goodsPicMaster}" alt="饰" title="配饰" class="s-pic-img s-guess-item-img">
											</div>
										</div>
										<div class="s-info">
											<input  type="hidden" class="collectfootgoodsId" name="collectfootgoodsId" th:value="${collect.goods.goodsId}"/>

											<div class="s-title collectgoodsfoot"><a href="#" title="">

												<a  th:text="${collect.goods.goodsName}"></a>
											</a></div>
											<div class="s-price-box">
												<span class="s-price"><em class="s-price-sign">¥</em><em class="s-value">
													<a  th:text="${collect.goods.goodsLastPrice}"></a>
												</em></span>
												<span class="s-history-price"><em class="s-price-sign">¥</em><em class="s-value">
													<a  th:text="${collect.goods.goodsPrice}"></a>
												</em></span>
											</div>
											<div class="s-extra-box">
												<span class="s-comment">好评: 98.03%</span>
												<span class="s-sales">月销: 219</span>
											</div>
										</div>
										<div class="s-tp">
											<input  type="hidden" class="collectfootgoodsId" name="collectfootgoodsId" th:value="${collect.goods.goodsId}"/>

											<a class="ui-btn-loading-before  collectdel" >取消收藏</a>
											<i class="am-icon-shopping-cart"></i>
											<input  type="hidden" class="collectfootgoodsId" name="collectfootgoodsId" th:value="${collect.goods.goodsId}"/>
											<!--@{/cart/insertcart-->
											<a class="ui-btn-loading-before buy collectgoodscart">加入购物车</a>
											<p>
												<a href="javascript:;" class="c-nodo J_delFav_btn">取消收藏</a>
											</p>
										</div>

									</div>

								</div>

</li>



							</ul>
							<div class="s-more-btn i-load-more-item" data-screen="0">
							<div align="center">
								共 <b th:text="${collectlist.total}"></b> 条 &nbsp;&nbsp;&nbsp;&nbsp;
								<a th:href="@{/collect/collectsearch(userId=${userId},curPage=1)}">首页</a> &nbsp;&nbsp;&nbsp;&nbsp;
								<a th:href="@{/collect/collectsearch(curPage=${collectlist.prePage},userId=${userId})}" th:if="${!collectlist.isFirstPage}">上一页</a>&nbsp;&nbsp;&nbsp;&nbsp;
								当前第<span th:text="${collectlist.pageNum}"></span>页&nbsp;&nbsp;&nbsp;&nbsp;
								<a th:href="@{/collect/collectsearch(curPage=${collectlist.nextPage},userId=${userId})}" th:if="${!collectlist.isLastPage}">下一页</a>&nbsp;&nbsp;&nbsp;&nbsp;
								<a th:href="@{/collect/collectsearch(userId=${userId},curPage=${collectlist.pages})}">末页</a>&nbsp;&nbsp;&nbsp;&nbsp;
							</div></div>
							</table>
							<!--<i class="am-icon-refresh am-icon-fw"></i>更多-->

						</div>

					</div>

				</div>
				<!--底部-->
				<div class="footer">
					<div class="footer-hd">
						<p>

							<a href="../home/home.html">商城首页</a>

						</p>
					</div>
				</div>
			</div>

			<aside class="menu">
				<ul>
					<li class="person">
						<a href="index.html">个人中心</a>
					</li>
					<li class="person">
						<a href="#">个人资料</a>
						<ul>
							<li class="active"> <a href="information.html">个人信息</a></li>
							<li> <a th:href="@{/pwd}">安全设置</a></li>
							<li> <a th:href="@{/address/address(userAccount=${session.user.userAccount})}">收货地址</a></li>
						</ul>
					</li>
					<li class="person">
						<a href="#">我的交易</a>
						<ul>
							<li><a th:href="@{/order/order}">订单管理</a></li>
							<li> <a th:href="@{/returnGoods/returngoods}">退款售后</a></li>
						</ul>
					</li>
					<li class="person">
						<a href="#">我的资产</a>
						<ul>
							<li> <a th:href="@{/volume/personselectvolume}">优惠券 </a></li>
							<!--<li> <a href="bonus.html">红包</a></li>-->
							<li> <a th:href="@{/bill/billlist}">账单明细</a></li>
						</ul>
					</li>

					<li class="person">
						<a href="#">我的小窝</a>
						<ul>
							<li> <a th:href="@{/collect/collectsearch(userId=${session.user.userId})}">收藏</a></li>
							<li> <a th:href="@{/foot/getfoot(userId=${session.user.userId})}">足迹</a></li>
							<li> <a th:href="@{/pingjia/comment(userId=${session.user.userId})}">评价</a></li>

							<!--<li> <a href="news.html">消息</a></li>-->
						</ul>
					</li>

				</ul>

			</aside>
		</div>

	</body>
	<script >
        //        <!--<a th:href="@{/goods/good(goodsId=${goods.goodsId})}">-->
//跳转添加足迹
        $(".collectgoodsfoot").click(
            function () {
                var r=$(this).prevAll(".collectfootgoodsId").val();
                $.ajax({
                    //请求的方式,向服务器发送请求,查询用户名是否存在,发送什么类型的请求
                    type: "POST",
                    //MVC ,请求发送C层,C->Model,去域对象的里面取,js可以是被el表达式
                    url: "/Luoqi/foot/insertfoot?goodsId="+r,
                    success: function (maps) {
//                        console.info(map);

//                        th:href="@{/goods/good(goodsId=${goods.goodsId})}
                        window.location.href="/Luoqi/goods/good?goodsId="+r;
//                        if (map.name=="0") {
//
//                            layer.msg("添加成功");


//                        }
//                        else {
//                            alert("已收藏");
//
//
//                        }
                    },
                    error: function () {
                        layer.closeAll();
                    }
                });
            }

        );
//        点击放入购物车
        <!--@{/cart/insertcart-->
        $(".collectgoodscart").click(
            function () {
                var r=$(this).prevAll(".collectfootgoodsId").val();
                $.ajax({
                    //请求的方式,向服务器发送请求,查询用户名是否存在,发送什么类型的请求
                    type: "POST",
                    //MVC ,请求发送C层,C->Model,去域对象的里面取,js可以是被el表达式
                    url: "/Luoqi/cart/insertcart?goodsId="+r,
                    success: function (maps) {
                         alert("添加成功");
                    },
                    error: function () {
                        layer.closeAll();
                    }
                });
            }

        );






        $(".collectdel").click(
            function () {
                var r=$(this).prevAll(".collectfootgoodsId").val();
                $(this).parent().parent().parent(".s-item-wrap").remove();
//                $(this).html("已收藏");
                $.ajax({
                    //请求的方式,向服务器发送请求,查询用户名是否存在,发送什么类型的请求
                    type: "POST",
                    //MVC ,请求发送C层,C->Model,去域对象的里面取,js可以是被el表达式
                    url: "/Luoqi/collect/delcollect?goodsId="+r,
                    success: function (maps) {
                        alert("删除成功");
                    },
                    error: function () {
                        layer.closeAll();
                    }
                });
            }

        );


	</script>


</html>